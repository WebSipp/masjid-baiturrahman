<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <!-- FIX #1: CRITICAL VIEWPORT META TAG - FIXED 1920px (BUKAN device-width!) -->
    <meta name="viewport" content="width=1920, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Display Digital Masjid Baiturrahman</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #1A4D8C;
            --primary-light: #5D8DC0;
            --accent-blue: #2E77BB;
            --text-dark: #2C3E50;
            --text-light: #F8F9FA;
            --bg-white: #FFFFFF;
            --bg-light: #F0F4F8;
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.85);
        }
        
        /* FIX #2: BASE CSS - FIXED DIMENSIONS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, #F0F4F8 0%, #E3EAF2 100%);
            color: var(--text-dark);
        }
        
        /* CONTAINER: Fixed 1920x1080 dengan auto-scale */
        body {
            min-width: 1920px;
            min-height: 1080px;
            transform-origin: top left;
        }
        
        /* Auto-scale untuk layar lebih kecil */
        @media screen and (max-width: 1919px) {
            body {
                transform: scale(calc(100vw / 1920));
            }
        }
        
        /* Auto-scale untuk layar lebih besar */
        @media screen and (min-width: 1921px) {
            body {
                transform: scale(calc(100vw / 1920));
            }
        }
        
        /* FIXED CONTAINER SIZE */
        .container {
            width: 1920px;
            height: 1080px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* HEADER - FIXED HEIGHT */
        .header {
            height: 100px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            flex-shrink: 0;
        }
        
        .date-section {
            display: flex;
            flex-direction: column;
        }
        
        .hijri-date {
            font-size: 32px;
            color: var(--primary-dark);
            font-weight: 700;
            margin-bottom: 4px;
            letter-spacing: 0.5px;
        }
        
        .gregorian-date {
            font-size: 22px;
            color: var(--text-dark);
            font-weight: 600;
            opacity: 0.9;
        }
        
        .masjid-section {
            text-align: right;
        }
        
        .masjid-name {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 48px;
            color: var(--primary-dark);
            line-height: 1.1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: -0.5px;
        }
        
        .masjid-address {
            font-size: 20px;
            color: var(--text-dark);
            margin-top: 5px;
            font-weight: 500;
            opacity: 0.85;
        }
        
        /* FIX #3: MAIN SECTION - FORCE HORIZONTAL LAYOUT */
        .main-container {
            height: 780px; /* 1080 - 100 (header) - 130 (footer) - 70 (marquee) */
            display: flex;
            flex-direction: row; /* FORCE HORIZONTAL! */
            padding: 20px 30px;
            gap: 30px;
            flex: 1;
            min-height: 0;
            overflow: hidden;
        }
        
        /* SIDEBAR KIRI - FIXED WIDTH */
        .sidebar-left {
            width: 600px; /* FIXED WIDTH */
            display: flex;
            flex-direction: column;
            gap: 25px;
            min-height: 0;
            height: 100%;
        }
        
        /* TIMER SECTION */
        .timer-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.9);
            min-height: 250px;
        }
        
        .clock-container {
            margin-bottom: 25px;
        }
        
        .digital-clock {
            font-family: 'Montserrat', sans-serif;
            font-size: 100px;
            font-weight: 800;
            color: var(--primary-dark);
            line-height: 1;
            margin-bottom: 10px;
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(26, 77, 140, 0.2);
        }
        
        .blink {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .timezone {
            font-size: 28px;
            color: var(--primary-light);
            font-weight: 600;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .countdown-container {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--accent-blue) 100%);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(46, 119, 187, 0.3);
            min-height: 110px;
        }
        
        .next-prayer-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 10px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .countdown-timer {
            font-family: 'Montserrat', sans-serif;
            font-size: 48px;
            font-weight: 800;
            color: var(--text-light);
            letter-spacing: 1px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        /* HADIS & AYAT SECTION */
        .wisdom-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 25px;
            min-height: 150px;
            overflow: visible;
            background: transparent !important;
            box-shadow: none !important;
            border: none !important;
        }
        
        .wisdom-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 0.8s ease-in-out;
            text-align: center;
            width: 100%;
            height: 100%;
        }
        
        .wisdom-text {
            font-size: 28px;
            line-height: 1.6;
            color: var(--text-dark);
            font-style: italic;
            margin-bottom: 15px;
            padding: 0 10px;
            font-weight: 500;
            max-width: 95%;
        }
        
        .wisdom-reference {
            font-size: 22px;
            color: var(--primary-dark);
            font-weight: 700;
            font-style: normal;
            padding: 10px 25px;
            background: rgba(26, 77, 140, 0.08);
            border-radius: 50px;
            display: inline-block;
        }
        
        /* MAIN CONTENT KANAN - FIXED WIDTH */
        .sidebar-right {
            width: 1260px; /* 1920 - 600 - 60 (gaps) = 1260px */
            background-color: #e6e6e6;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            min-height: 0;
            box-shadow: var(--shadow);
        }
        
        .wallpaper-slider {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .wallpaper-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.2s ease-in-out;
        }
        
        .wallpaper-slide.active {
            opacity: 1;
        }
        
        /* WALLPAPER 1 - Kaligrafi Masjid */
        .wallpaper-1 {
            background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), 
                              url('https://images.unsplash.com/photo-1548013146-72479768bada?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
        }
        
        /* WALLPAPER 2 - Masjidil Haram */
        .wallpaper-2 {
            background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), 
                              url('https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
        }
        
        /* WALLPAPER 3 - Masjid Nabawi */
        .wallpaper-3 {
            background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), 
                              url('https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
        }
        
        /* FOOTER - JADWAL SHALAT - FIXED HEIGHT */
        .prayer-schedule {
            height: 130px;
            background: linear-gradient(135deg, var(--primary-dark) 0%, #153a6e 100%);
            border-radius: 20px 20px 0 0;
            padding: 15px 0;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 5;
            flex-shrink: 0;
        }
        
        .prayer-schedule::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--accent-blue), transparent);
            animation: shimmer-line 3s infinite linear;
        }
        
        @keyframes shimmer-line {
            0% { background-position: -200px 0; }
            100% { background-position: calc(200px + 100%) 0; }
        }
        
        .schedule-title {
            text-align: center;
            color: var(--text-light);
            font-family: 'Montserrat', sans-serif;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 15px;
            padding: 0 20px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }
        
        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            padding: 0 20px;
        }
        
        .prayer-item {
            background-color: rgba(255, 255, 255, 0.08);
            padding: 15px 8px;
            text-align: center;
            border-radius: 12px;
            margin: 0 4px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .prayer-item:hover {
            background-color: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }
        
        .prayer-item.active {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #3a8ce4 100%);
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(46, 119, 187, 0.4);
            z-index: 2;
        }
        
        /* Efek shimmer untuk item aktif */
        .prayer-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer-active 3s infinite;
        }
        
        @keyframes shimmer-active {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .prayer-name {
            font-size: 22px;
            color: var(--text-light);
            font-weight: 600;
            margin-bottom: 10px;
            opacity: 0.9;
            text-transform: uppercase;
        }
        
        .prayer-item.active .prayer-name {
            opacity: 1;
            font-weight: 700;
        }
        
        .prayer-time {
            font-family: 'Montserrat', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: var(--text-light);
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }
        
        /* RUNNING TEXT - FIXED HEIGHT */
        .marquee-container {
            height: 70px;
            background: linear-gradient(90deg, rgba(240, 247, 255, 0.9) 0%, rgba(255, 255, 255, 0.9) 100%);
            overflow: hidden;
            border-top: 2px solid var(--primary-light);
            position: relative;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            flex-shrink: 0;
        }
        
        .marquee-track {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: max-content;
            display: flex;
            align-items: center;
            animation: marquee-very-slow 300s linear infinite;
        }
        
        .adab-item {
            white-space: nowrap;
            padding: 0 60px;
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
        }
        
        @keyframes marquee-very-slow {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-100%); }
        }
        
        .adab-item i {
            margin-right: 15px;
            color: var(--accent-blue);
            font-size: 24px;
        }
        
        /* ===== DISABLE MOBILE BEHAVIOR ===== */
        /* NO media queries yang mengubah layout jadi vertikal! */
        /* Semua screen size tetap pakai layout horizontal! */
        
        /* CRITICAL: REMOVED ALL MOBILE MEDIA QUERIES */
        /* @media (max-width: 1366px) - REMOVED */
        /* @media (max-width: 1024px) - REMOVED (ini penyebab utama jadi vertikal!) */
        /* @media (max-width: 768px) - REMOVED */
        /* @media (max-width: 480px) - REMOVED */
        
        /* KEEP ONLY SCALING FOR LARGER SCREENS */
        @media screen and (min-width: 1921px) {
            /* Hanya scale, tidak ubah layout */
        }
        
        /* STYLE UNTUK FULLSCREEN */
        body:fullscreen {
            overflow: hidden;
        }
        
        body:fullscreen .header {
            padding: 0 60px;
        }
        
        body:fullscreen .masjid-name {
            font-size: 52px;
        }
        
        body:fullscreen .digital-clock {
            font-size: 110px;
        }
        
        body:fullscreen .wisdom-text {
            font-size: 32px;
        }
        
        body:fullscreen .prayer-time {
            font-size: 40px;
        }
        
        /* ANIMASI */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* Fullscreen Overlay untuk Prompt */
        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .fullscreen-overlay h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 48px;
            margin-bottom: 30px;
            color: var(--accent-blue);
        }
        
        .fullscreen-overlay p {
            font-size: 28px;
            margin-bottom: 40px;
            max-width: 800px;
            line-height: 1.6;
        }
        
        .fullscreen-btn {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 28px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .fullscreen-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(46, 119, 187, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- FULLSCREEN OVERLAY (akan dihilangkan setelah masuk fullscreen) -->
        <div class="fullscreen-overlay" id="fullscreen-overlay">
            <h2>Display Digital Masjid Baiturrahman</h2>
            <p>Untuk pengalaman terbaik, tampilan akan dibuka dalam mode layar penuh. Klik tombol di bawah untuk melanjutkan.</p>
            <button class="fullscreen-btn" id="enter-fullscreen-btn">
                <i class="fas fa-expand"></i> Buka Layar Penuh
            </button>
        </div>
        
        <!-- HEADER - TANGGAL DAN INFO MASJID -->
        <header class="header">
            <div class="date-section">
                <div class="hijri-date" id="hijri-date">17 Ramadhan 1445 H</div>
                <div class="gregorian-date" id="gregorian-date">Senin, 28 Maret 2024</div>
            </div>
            
            <div class="masjid-section">
                <h1 class="masjid-name">MASJID BAITURRAHMAN</h1>
                <p class="masjid-address">Jl. Raya Janti, Banguntapan, Bantul, Yogyakarta</p>
            </div>
        </header>
        
        <!-- MAIN CONTAINER - HORIZONTAL LAYOUT -->
        <div class="main-container">
            <!-- SIDEBAR KIRI - TIMER & HADIS -->
            <div class="sidebar-left">
                <!-- TIMER SECTION -->
                <div class="timer-section">
                    <div class="clock-container">
                        <div class="digital-clock" id="digital-clock">14:45</div>
                        <div class="timezone">WIB</div>
                    </div>
                    
                    <div class="countdown-container">
                        <div class="next-prayer-name" id="next-prayer-name">Maghrib</div>
                        <div class="countdown-timer" id="countdown-timer">02:14:28</div>
                    </div>
                </div>
                
                <!-- HADIS & AYAT SECTION -->
                <div class="wisdom-section">
                    <div class="wisdom-content fade-in" id="wisdom-content">
                        <div class="wisdom-text" id="wisdom-text">
                            "Sesungguhnya shalat itu adalah kewajiban yang ditentukan waktunya atas orang-orang yang beriman."
                        </div>
                        <div class="wisdom-reference" id="wisdom-reference">QS. An-Nisa (4) : 103</div>
                    </div>
                </div>
            </div>
            
            <!-- SIDEBAR KANAN - WALLPAPER -->
            <div class="sidebar-right">
                <div class="wallpaper-slider">
                    <div class="wallpaper-slide wallpaper-1 active"></div>
                    <div class="wallpaper-slide wallpaper-2"></div>
                    <div class="wallpaper-slide wallpaper-3"></div>
                </div>
            </div>
        </div>
        
        <!-- FOOTER - JADWAL SHALAT -->
        <footer class="prayer-schedule">
            <div class="schedule-title">JADWAL SHALAT HARI INI</div>
            <div class="prayer-grid" id="prayer-grid">
                <!-- Jadwal akan diisi oleh JavaScript -->
            </div>
        </footer>
        
        <!-- RUNNING TEXT - ADAB ISLAM -->
        <div class="marquee-container">
            <div class="marquee-track" id="marquee-track">
                <!-- Adab akan diisi oleh JavaScript -->
            </div>
        </div>
    </div>
    
    <script>
        // DATA JADWAL SHALAT
        const prayerTimes = {
            "Subuh": "04:30",
            "Syuruq": "05:45",
            "Dzuhur": "12:15",
            "Ashar": "15:30",
            "Maghrib": "18:20",
            "Isya": "19:45"
        };
        
        const prayerOrder = ["Subuh", "Syuruq", "Dzuhur", "Ashar", "Maghrib", "Isya"];
        
        // DATA HIKMAH & HADIS
        const wisdoms = [
            {
                text: "Sesungguhnya shalat itu adalah kewajiban yang ditentukan waktunya atas orang-orang yang beriman.",
                reference: "QS. An-Nisa (4) : 103"
            },
            {
                text: "Barangsiapa yang shalat Subuh, maka ia berada dalam jaminan Allah.",
                reference: "HR. Muslim"
            },
            {
                text: "Amal pertama yang dihisab dari seorang hamba pada hari kiamat adalah shalat.",
                reference: "HR. Tirmidzi"
            }
        ];
        
        // DATA ADAB ISLAM
        const adabs = [
            "Masuk masjid dengan membaca doa dan menggunakan kaki kanan terlebih dahulu",
            "Menjaga kebersihan masjid dan tidak meninggalkan sampah di dalamnya",
            "Mematikan atau menyetel mode silent ponsel saat berada di dalam masjid"
        ];
        
        // FUNGSI UNTUK UPDATE WAKTU DAN TANGGAL
        function updateDateTime() {
            const now = new Date();
            
            // Update Jam Digital
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            
            // Buat efek kedip pada titik dua
            const colon = now.getSeconds() % 2 === 0 ? ":" : " ";
            document.getElementById('digital-clock').innerHTML = 
                `${hours}<span class="blink">${colon}</span>${minutes}`;
            
            // Update Tanggal Masehi
            const days = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
            const months = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", 
                           "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            
            const dayName = days[now.getDay()];
            const date = now.getDate();
            const monthName = months[now.getMonth()];
            const year = now.getFullYear();
            
            document.getElementById('gregorian-date').textContent = 
                `${dayName}, ${date} ${monthName} ${year}`;
            
            // Update countdown
            updateCountdown(now);
            
            // Update highlight shalat aktif
            updateActivePrayer(now);
            
            // Update efek visual countdown saat < 5 menit
            updateCountdownEffects();
        }
        
        // FUNGSI UNTUK COUNTDOWN SHALAT BERIKUTNYA
        function updateCountdown(now) {
            const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            
            // Cari shalat berikutnya
            let nextPrayerName = "Subuh";
            let nextPrayerTime = prayerTimes["Subuh"];
            let found = false;
            
            for (let i = 0; i < prayerOrder.length; i++) {
                const prayerName = prayerOrder[i];
                const prayerTime = prayerTimes[prayerName];
                const [prayerHour, prayerMinute] = prayerTime.split(':').map(Number);
                const prayerSeconds = prayerHour * 3600 + prayerMinute * 60;
                
                if (prayerSeconds > currentTime) {
                    nextPrayerName = prayerName;
                    nextPrayerTime = prayerTime;
                    found = true;
                    break;
                }
            }
            
            // Jika tidak ada shalat berikutnya di hari ini, ambil Subuh besok
            if (!found) {
                nextPrayerName = "Subuh";
                nextPrayerTime = prayerTimes["Subuh"];
            }
            
            // Hitung selisih waktu
            const [nextHour, nextMinute] = nextPrayerTime.split(':').map(Number);
            const nextPrayerSeconds = nextHour * 3600 + nextMinute * 60;
            
            let diffSeconds = nextPrayerSeconds - currentTime;
            
            // Jika shalat berikutnya besok (untuk kasus setelah Isya)
            if (diffSeconds < 0) {
                diffSeconds += 24 * 3600;
            }
            
            const hours = Math.floor(diffSeconds / 3600);
            const minutes = Math.floor((diffSeconds % 3600) / 60);
            const seconds = diffSeconds % 60;
            
            // Update UI
            document.getElementById('next-prayer-name').textContent = nextPrayerName;
            document.getElementById('countdown-timer').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        
        // FUNGSI UNTUK HIGHLIGHT SHALAT AKTIF
        function updateActivePrayer(now) {
            const currentTime = now.getHours() * 60 + now.getMinutes();
            const prayerItems = document.querySelectorAll('.prayer-item');
            
            prayerItems.forEach((item, index) => {
                item.classList.remove('active');
                
                const prayerName = prayerOrder[index];
                const prayerTime = prayerTimes[prayerName];
                const [prayerHour, prayerMinute] = prayerTime.split(':').map(Number);
                const prayerTotalMinutes = prayerHour * 60 + prayerMinute;
                
                if (index > 0) {
                    const prevPrayerName = prayerOrder[index - 1];
                    const prevPrayerTime = prayerTimes[prevPrayerName];
                    const [prevHour, prevMinute] = prevPrayerTime.split(':').map(Number);
                    const prevTotalMinutes = prevHour * 60 + prevMinute;
                    
                    if (currentTime >= prevTotalMinutes && currentTime < prayerTotalMinutes) {
                        item.classList.add('active');
                    }
                }
            });
        }
        
        // FUNGSI UNTUK EFEK VISUAL COUNTDOWN
        function updateCountdownEffects() {
            const countdownTimer = document.getElementById('countdown-timer');
            const countdownText = countdownTimer.textContent;
            const [h, m, s] = countdownText.split(':').map(Number);
            
            if (h === 0 && m < 5) {
                countdownTimer.style.color = '#FFD700';
            } else {
                countdownTimer.style.color = 'var(--text-light)';
            }
        }
        
        // FUNGSI UNTUK MEMBUAT ELEMEN JADWAL SHALAT
        function createPrayerSchedule() {
            const prayerGrid = document.getElementById('prayer-grid');
            prayerGrid.innerHTML = '';
            
            prayerOrder.forEach(prayerName => {
                const prayerTime = prayerTimes[prayerName];
                
                const prayerItem = document.createElement('div');
                prayerItem.className = 'prayer-item';
                prayerItem.id = `prayer-${prayerName.toLowerCase()}`;
                
                prayerItem.innerHTML = `
                    <div class="prayer-name">${prayerName}</div>
                    <div class="prayer-time">${prayerTime}</div>
                `;
                
                prayerGrid.appendChild(prayerItem);
            });
        }
        
        // FUNGSI UNTUK UPDATE TANGGAL HIJRIYAH
        function updateHijriDate() {
            const now = new Date();
            const hijriMonths = ["Muharram", "Safar", "Rabiul Awal", "Rabiul Akhir", 
                                "Jumadil Awal", "Jumadil Akhir", "Rajab", "Sya'ban", 
                                "Ramadhan", "Syawal", "Dzulqa'dah", "Dzulhijjah"];
            
            const hijriYear = 1445;
            const hijriMonth = hijriMonths[8];
            const hijriDay = 17 + Math.floor(now.getDate() / 2);
            
            document.getElementById('hijri-date').textContent = 
                `${hijriDay} ${hijriMonth} ${hijriYear} H`;
        }
        
        // FUNGSI UNTUK MEMBUAT RUNNING TEXT ADAB
        function createAdabMarquee() {
            const marqueeTrack = document.getElementById('marquee-track');
            marqueeTrack.innerHTML = '';
            
            // Tambahkan semua adab dengan spasi normal
            adabs.forEach((adab, index) => {
                const adabItem = document.createElement('div');
                adabItem.className = 'adab-item';
                
                const icons = ['fas fa-door-open', 'fas fa-broom', 'fas fa-mobile-alt'];
                adabItem.innerHTML = `<i class="${icons[index]}"></i> ${adab}`;
                
                marqueeTrack.appendChild(adabItem);
                
                // Tambahkan spasi besar antara item
                const space = document.createElement('div');
                space.style.padding = '0 100px';
                marqueeTrack.appendChild(space);
            });
            
            // Duplikat untuk looping smooth
            adabs.forEach((adab, index) => {
                const adabItem = document.createElement('div');
                adabItem.className = 'adab-item';
                
                const icons = ['fas fa-door-open', 'fas fa-broom', 'fas fa-mobile-alt'];
                adabItem.innerHTML = `<i class="${icons[index]}"></i> ${adab}`;
                
                marqueeTrack.appendChild(adabItem);
                
                const space = document.createElement('div');
                space.style.padding = '0 100px';
                marqueeTrack.appendChild(space);
            });
        }
        
        // FUNGSI UNTUK ROTASI HIKMAH & HADIS
        let wisdomIndex = 0;
        function rotateWisdom() {
            const wisdomContent = document.getElementById('wisdom-content');
            
            // Fade out
            wisdomContent.style.opacity = 0;
            
            setTimeout(() => {
                wisdomIndex = (wisdomIndex + 1) % wisdoms.length;
                const wisdom = wisdoms[wisdomIndex];
                
                document.getElementById('wisdom-text').textContent = wisdom.text;
                document.getElementById('wisdom-reference').textContent = wisdom.reference;
                
                // Fade in
                setTimeout(() => {
                    wisdomContent.style.opacity = 1;
                }, 50);
            }, 400);
        }
        
        // FUNGSI UNTUK ROTASI WALLPAPER
        let wallpaperIndex = 0;
        const wallpapers = document.querySelectorAll('.wallpaper-slide');
        
        function rotateWallpaper() {
            // Sembunyikan semua wallpaper
            wallpapers.forEach(wallpaper => {
                wallpaper.classList.remove('active');
            });
            
            // Tampilkan wallpaper berikutnya
            wallpaperIndex = (wallpaperIndex + 1) % wallpapers.length;
            wallpapers[wallpaperIndex].classList.add('active');
        }
        
        // FUNGSI UNTUK MASUK FULLSCREEN OTOMATIS
        function enterFullscreen() {
            const elem = document.documentElement;
            
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
            }
        }
        
        // FUNGSI UNTUK KELUAR FULLSCREEN
        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { /* Chrome, Safari & Opera */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
            }
        }
        
        // INISIALISASI SAAT HALAMAN DIMUAT
        document.addEventListener('DOMContentLoaded', function() {
            // Buat jadwal shalat
            createPrayerSchedule();
            
            // Update tanggal hijriyah
            updateHijriDate();
            
            // Buat running text adab dengan animasi yang benar
            createAdabMarquee();
            
            // Update waktu setiap detik
            setInterval(updateDateTime, 1000);
            updateDateTime(); // Panggil sekali di awal
            
            // Rotasi hikmah setiap 30 detik
            setInterval(rotateWisdom, 30000);
            
            // Rotasi wallpaper setiap 60 detik
            setInterval(rotateWallpaper, 60000);
            
            // Deteksi tombol F11 untuk fullscreen
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F11') {
                    e.preventDefault();
                    if (!document.fullscreenElement) {
                        enterFullscreen();
                    } else {
                        exitFullscreen();
                    }
                }
                
                // Tombol ESC juga bisa keluar fullscreen (opsional)
                if (e.key === 'Escape' && document.fullscreenElement) {
                    exitFullscreen();
                }
            });
            
            // Handler untuk tombol fullscreen
            document.getElementById('enter-fullscreen-btn').addEventListener('click', function() {
                enterFullscreen();
                document.getElementById('fullscreen-overlay').style.display = 'none';
            });
            
            // Deteksi apakah sudah di fullscreen
            document.addEventListener('fullscreenchange', function() {
                if (!document.fullscreenElement) {
                    // Jika keluar dari fullscreen, tampilkan overlay lagi
                    document.getElementById('fullscreen-overlay').style.display = 'flex';
                }
            });
            
            // Coba masuk fullscreen otomatis setelah 1 detik
            setTimeout(() => {
                // Hanya jika belum fullscreen
                if (!document.fullscreenElement) {
                    // Tampilkan overlay untuk konfirmasi
                    document.getElementById('fullscreen-overlay').style.display = 'flex';
                }
            }, 1000);
            
            // Jika user klik di mana saja, coba masuk fullscreen
            document.addEventListener('click', function firstClick() {
                if (!document.fullscreenElement) {
                    enterFullscreen();
                    document.getElementById('fullscreen-overlay').style.display = 'none';
                }
                document.removeEventListener('click', firstClick);
            });
        });
    </script>
</body>
</html>
